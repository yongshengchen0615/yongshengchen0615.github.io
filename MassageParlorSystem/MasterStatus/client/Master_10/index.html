<!doctype html>
<html lang="zh-Hant" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>師傅狀態看板</title>

  <!-- LIFF SDK -->
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <!-- 可留可不留：主要樣式在 styles.css -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Loading -->
  <div id="loadingOverlay" aria-live="polite" aria-busy="true">
    <div class="loader" aria-label="載入中"></div>
  </div>

  <!-- Access Denied -->
  <div id="accessDenied" class="denied" style="display:none;" role="alert" aria-live="polite">
    <div class="denied-card">
      <div class="denied-title" id="deniedTitle">尚未通過審核</div>
      <div class="denied-sub" id="deniedText">請聯絡管理員開通權限。</div>

      <div class="denied-meta">
        <div><span class="k">審核狀態</span><span class="v" id="deniedAudit">-</span></div>
        <div><span class="k">剩餘天數</span><span class="v" id="deniedDays">-</span></div>
        <div><span class="k">使用者</span><span class="v" id="deniedName">-</span></div>
      </div>
    </div>
  </div>

  <!-- App 主體 -->
  <div id="appContainer" style="display:none;">
    <div class="page-container">

      <!-- Header -->
      <div class="page-header">
        <div class="header-text">
          <h1>師傅狀態看板</h1>
          <div class="subtitle">
            目前顯示師傅 <span id="techMasterId">--</span> 的狀態
          </div>
        </div>

        <!-- Theme Toggle -->
        <button id="themeToggleBtn" class="theme-toggle" type="button" aria-label="切換亮色或暗色主題">
          <span class="theme-toggle-track" aria-hidden="true">
            <span class="theme-toggle-knob"></span>
          </span>
          <span class="theme-toggle-text">
            <span class="theme-label-light">亮色</span>
            <span class="theme-label-dark">暗色</span>
          </span>
        </button>
      </div>

      <!-- 狀態卡 -->
      <div class="tech-status-grid">
        <div class="tech-status-card">
          <div class="tech-status-header">
            <div class="tech-status-title">身體</div>
          </div>

          <div class="tech-status-list">
            <div class="tech-row">
              <span class="tech-label">狀態</span>
              <span id="bodyStatusText" class="tech-value">-</span>
            </div>
            <div class="tech-row">
              <span class="tech-label">預約</span>
              <span id="bodyAppointmentText" class="tech-value">-</span>
            </div>
            <div class="tech-row">
              <span class="tech-label">剩餘時間</span>
              <span id="bodyRemainingText" class="tech-value">-</span>
            </div>
          </div>
        </div>

        <div class="tech-status-card">
          <div class="tech-status-header">
            <div class="tech-status-title">腳底</div>
          </div>

          <div class="tech-status-list">
            <div class="tech-row">
              <span class="tech-label">狀態</span>
              <span id="footStatusText" class="tech-value">-</span>
            </div>
            <div class="tech-row">
              <span class="tech-label">預約</span>
              <span id="footAppointmentText" class="tech-value">-</span>
            </div>
            <div class="tech-row">
              <span class="tech-label">剩餘時間</span>
              <span id="footRemainingText" class="tech-value">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 營業設定（日曆） -->
      <section class="cal-card" aria-label="日曆">
        <div class="cal-head">
          <div>
            <div class="cal-title">預約設定</div>
            <div class="cal-sub" id="bizSummary">讀取中…</div>
          </div>

          <div class="cal-nav" aria-label="切換月份">
            <button id="calPrev" type="button" aria-label="上一個月">‹</button>
            <div id="calMonthLabel" class="cal-month">—</div>
            <button id="calNext" type="button" aria-label="下一個月">›</button>
          </div>
        </div>

        <div class="cal-weekdays" id="calWeekdays" aria-hidden="true"></div>
        <div class="cal-grid" id="calGrid"></div>

        <div class="cal-legend" aria-hidden="true">
          <span class="legend-item"><span class="legend-swatch sw-weeklyoff"></span> 固定休</span>
          <span class="legend-item"><span class="legend-swatch sw-holiday"></span> 休假</span>
          <span class="legend-item"><span class="legend-swatch sw-workday"></span> 補班</span>
          <span class="legend-item"><span class="legend-swatch sw-special"></span> 其他</span>
          <span class="legend-item"><span class="legend-swatch sw-today"></span> 今日框線</span>
        </div>
      </section>

      <div id="toast" class="toast" style="display:none;"></div>

    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
