<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>20點轉盤後台管理</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Pico.css：輕量化 CSS 框架以優化表單/按鈕/排版 -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css" />
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans TC', Arial, sans-serif; background:#0f1115; color:#e5e7eb; color-scheme: dark; }
    .container { max-width: 1000px; margin: 24px auto; padding: 0 16px; }
    .card { background: #151821; border: 1px solid #222838; border-radius: 12px; padding: 20px; box-shadow: 0 6px 20px rgba(0,0,0,0.25); }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .row input { padding: 9px 12px; border: 1px solid #2a3040; background:#1b2030; color:#e5e7eb; border-radius: 8px; min-height: 36px; }
    .row input::placeholder{ color:#8a90a0; }
    .row label { font-size: 14px; color: #cfd8e3; }
    .btn { padding: 8px 14px; border-radius: 8px; border: 1px solid #2f3750; cursor: pointer; background: #212736; color:#e5e7eb; transition: background .15s ease, box-shadow .15s ease; }
    .btn:hover { background:#283049; box-shadow:0 1px 4px rgba(0,0,0,0.25); }
    .btn.primary { background: #3b82f6; color: #fff; border-color: #3b82f6; }
    .btn.primary:hover { background:#2563eb; }
    .btn.danger { background: #ef4444; color: #fff; border-color: #ef4444; }
    .btn.danger:hover { background:#dc2626; }
    .table-wrap { margin-top: 16px; border:1px solid #222838; border-radius:8px; overflow:auto; max-height: 56vh; }
    .table-wrap { -webkit-overflow-scrolling: touch; }
    table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 15px; }
    th, td { border-bottom: 1px solid #222838; padding: 10px; text-align: left; color:#e5e7eb; }
    thead th { position: sticky; top: 0; background: #1b2030; z-index: 1; }
    tbody tr:nth-child(even){ background:#131926; }
    .col-idx { width: 56px; }
    .col-label { width: 34%; min-width: 200px; }
    .col-prob { width: 26%; min-width: 160px; }
    .col-color { width: 20%; min-width: 200px; }
    .col-actions { width: 160px; }
    .status { margin-top: 12px; font-size: 14px; display:flex; align-items:center; gap:8px; }
    .status.ok { color: #60a5fa; }
    .status.err { color: #f87171; }
    .status .dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
    .status.ok .dot { background:#60a5fa; }
    .status.err .dot { background:#f87171; }
    .badge { font-size: 12px; color: #9aa3b2; margin-left: 8px; }
    .flex-grow { flex: 1; }
    .color-field { display:flex; align-items:center; gap:10px; }
    .color-field .colorPicker { width: 40px; height: 32px; padding: 0; background: transparent; border: 1px solid #2a3040; border-radius: 6px; }
    .color-field .colorText { flex:1; min-width:140px; padding: 9px 12px; border: 1px solid #2a3040; background:#1b2030; color:#e5e7eb; border-radius: 8px; }
    .drag-handle { display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px; margin-right:8px; cursor:grab; color:#9aa3b2; }
    tbody tr.dragging { opacity: .6; }
    tbody tr { user-select: none; }

    /* Responsive adjustments */
    @media (max-width: 1024px) {
      .container { padding: 0 12px; }
      .table-wrap { max-height: 52vh; }
      table { font-size: 14px; }
      th, td { padding: 9px; }
    }
    @media (max-width: 768px) {
      .row { flex-direction: column; align-items: stretch; }
      .row input { width: 100%; }
      .col-label { width: auto; }
      .col-prob { width: auto; }
      .col-color { width: auto; }
      .col-actions { width: auto; }
      th, td { padding: 8px; }
      .color-field { gap:8px; }
      .color-field .colorPicker { width: 36px; height: 28px; }
      /* 讓操作按鈕在窄螢幕可換行且不撐寬 */
      td:last-child { white-space: normal; }
      td:last-child .btn { display: inline-block; min-width: 84px; margin-bottom: 6px; }
    }
    @media (max-width: 520px) {
      body { font-size: 14px; }
      thead th { font-size: 13px; }
      td input { font-size: 14px; }
      .drag-handle { width:20px; height:20px; margin-right:6px; }
      .table-wrap { max-height: 50vh; }
      .color-field { flex-wrap: wrap; }
      .color-field .colorText { min-width: 0; width: 100%; }
      /* 更小尺寸下縮減左右間距並提升觸控友善性 */
      .btn { padding: 8px 12px; min-width: 72px; }
      th, td { padding: 6px; }
      table { font-size: 13.5px; }
      .color-field .colorPicker { width: 30px; height: 26px; }
    }
    @media (max-width: 400px) {
      table { font-size: 13px; }
      .col-idx { width: 44px; }
      .drag-handle { width:18px; height:18px; }
      .col-actions { width: auto; }
    }
    /* 覆寫 Pico：維持原按鈕與輸入框暗色風格與大小 */
    :root { --pico-font-size: 16px; }
    .btn { background: #212736; color:#e5e7eb; border: 1px solid #2f3750; }
    .btn.primary { background: #3b82f6; border-color: #3b82f6; color:#fff; }
    .btn.primary:hover { background:#2563eb; }
    .btn.danger { background: #ef4444; border-color: #ef4444; color:#fff; }
    .btn.danger:hover { background:#dc2626; }
    .row input, .color-field .colorText, .color-field .colorPicker {
      background:#1b2030; color:#e5e7eb; border:1px solid #2a3040;
    }
    table { background: transparent; }
  </style>
</head>
<body data-theme="dark">
  <div class="container">
    <h2>20點轉盤後台管理</h2>
    <div class="card">
      <!-- 已改為由 config.js 設定，並自動載入資料；以下設定輸入區塊移除 -->
      <div class="status" id="status"></div>

      <div class="table-wrap">
      <table id="dataTable">
        <thead>
          <tr>
            <th class="col-idx">#</th>
            <th class="col-label">獎項（label）</th>
            <th class="col-prob">機率（weight / %）</th>
            <th class="col-color">顏色（color）</th>
            <th class="col-actions">操作</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn" id="addRowBtn">新增一列</button>
        <div class="flex-grow"></div>
        <button class="btn danger" id="resetBtn">清空所有列</button>
        <button class="btn primary" id="saveBtn">儲存到後端</button>
      </div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="admin.js"></script>
</body>
</html>
